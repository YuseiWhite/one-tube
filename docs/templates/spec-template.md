# 機能仕様書: [機能名]

**機能ブランチ**: `feature/<user-name>` または `feature/<feature-name>`
**作成日**: [日付]
**ステータス**: ドラフト
**OneTubeプロジェクト**: NFT-Gated Video Streaming Platform (MVP)

**例**:
- `feature/yuseiwhite` - ユーザー名ベースの開発
- `feature/nft-purchase` - 機能名ベースの開発

---

## ⚡ OneTube MVP ガイドライン

### MVP設計方針
1. **動作する** → テストが通る
2. **わかりやすい** → コードが読みやすい
3. **速く書ける** → ボイラープレート最小
4. 拡張性は無視（MVP完成が最優先）

### 技術スタック（仕様書に記載可能な技術）
- **Blockchain**: Sui devnet、Move言語
- **NFT標準**: Kiosk標準（必須）
- **Storage**: Walrus分散ストレージ
- **Encryption**: Seal（セッション管理）
- **Frontend**: React + Vite
- **Backend**: Express + TypeScript
- **Sponsored Transaction**: ガスレス購入（モック実装）

### テスト優先順位
1. **Contract Test**: Move契約の単体テスト
2. **Integration Test**: Backend ↔ Smart Contract統合
3. **E2E Test**: 購入・視聴フロー全体
4. **Unit Test**: 個別関数

### セクション要件
- **必須セクション**: ユーザーシナリオ、機能要件
- **オプションセクション**: 主要エンティティ（データ関連の場合のみ）
- セクションが適用されない場合は、完全に削除（「N/A」として残さない）

### AI生成用の注意点
1. **曖昧さをマーク**: [要確認: 具体的な質問] を使用
2. **推測しない**: 不明点は明示的にマーク
3. **テスト可能性**: すべての要件はテスト可能であるべき
4. **OneTube固有の考慮**: Kiosk標準、Walrus BLOB ID、Seal暗号化など

---

## ユーザーシナリオとテスト *(必須)*

### 主要なユーザーストーリー
[平易な言葉でメインのユーザージャーニーを説明]

**例（OneTube）**:
- アスリートがNFT動画をKioskに出品する
- ファンがSui WalletでNFTを購入する（Sponsored Transactionでガスレス）
- ファンが購入したNFTで動画を視聴する（Seal暗号化解除）

### 受け入れシナリオ
1. **前提** [初期状態]、**操作** [アクション]、**結果** [期待される結果]
2. **前提** [初期状態]、**操作** [アクション]、**結果** [期待される結果]

**例（OneTube）**:
1. **前提** Kioskに0.5 SUIのNFTが出品されている、**操作** ユーザーが購入ボタンをクリック、**結果** NFTがユーザーのKioskに転送され、収益が自動分配される（70%/25%/5%）
2. **前提** ユーザーがNFTを所有している、**操作** 視聴ボタンをクリック、**結果** Sealセッションが作成され、動画が再生される

### エッジケース
- [境界条件] の場合はどうなるか？
- システムは [エラーシナリオ] をどのように処理するか？

**例（OneTube）**:
- NFTを所有していないユーザーが視聴しようとした場合は？
- Sealセッションが期限切れになった場合は？
- Sponsored Transaction失敗時は？

## 要件 *(必須)*

### 機能要件
- **FR-001**: システムは [具体的な機能] できなければならない
- **FR-002**: システムは [具体的な機能] できなければならない
- **FR-003**: ユーザーは [主要な操作] できなければならない

*不明確な要件のマーク例:*
- **FR-006**: システムは [要確認: 具体的な仕様が不明] を実装しなければならない

### OneTube固有の技術要件（該当する場合）
- **Kiosk**: Kiosk標準APIを使用したNFT販売
- **Transfer Policy**: 自動収益分配ロジック
- **Walrus**: BLOB IDを使用した動画ストレージ
- **Seal**: セッション管理と暗号化解除
- **Sponsored Transaction**: ガスレス購入フロー

### 主要エンティティ *(機能がデータに関わる場合に含める)*
- **[エンティティ1]**: [何を表すか、主要属性]
- **[エンティティ2]**: [何を表すか、他のエンティティとの関係]

**例（OneTube）**:
- **VideoNFT**: 動画NFT（BLOB ID、価格、アスリートID、Kiosk ID）
- **Session**: Sealセッション（セッションID、NFT ID、有効期限）

---

## レビューチェックリスト

### 完全性
- [ ] すべての必須セクションが完成している
- [ ] ユーザーシナリオが明確である
- [ ] 機能要件がテスト可能である
- [ ] OneTube技術スタックとの整合性がある

### MVP方針との整合性
- [ ] 必要最小限の機能に絞られている
- [ ] 拡張性より実用性を優先している
- [ ] テスト戦略が明確である

---